<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static',filename='js/script.js') }}"></script>
</head>
<body>
{#<div class="wrap">#}
<form action="/test" method="post" enctype="multipart/form-data">
{#<form enctype="multipart/form-data">#}
    <input type="hidden" name="preview1" value="">
    <input type="hidden" name="preview2" value="">
    <div class="input-img-area">
        <div class="show-input-img">
            <div class="show-first-img">
                <img id="preview1"/>
            </div>
            <div class="show-second-img">
                <img id="preview2"/>
            </div>
        </div>
        <div class="set-input-img">
            <div class="first-select-area">
                <div class="first-img-import-bt">
                    <div class="button">
                        <label for="chooseFile">

                        </label>
                    </div>
                    <input type="file" id="image1" accept="image/png"
                           onchange="previewImg1(this);">
                </div>
                <div class="first-img-webcam-bt">
                    <input type="button" value="WebCam" onclick="takeWebcam1()"/>
                </div>
            </div>
            <div class="second-select-area">
                <div class="second-img-import-bt">
                    <div class="button">
                        <label for="chooseFile">

                        </label>
                    </div>
                    <input type="file" id="image2" accept="image/png"
                           onchange="previewImg2(this);">
                </div>
                <div class="second-img-webcam-bt">
                    <input type="button" value="WebCam" onclick="takeWebcam2()"/>
                </div>
            </div>
        </div>
    </div>
    <input type="submit" value="blend">
    <script>
        {#function getBase64Image(img) {#}
        {#    var canvas = document.createElement("canvas");#}
        {#    var ctx = canvas.getContext("2d");#}
        {#    canvas.width = img.width;#}
        {#    canvas.height = img.height;#}
        {#    ctx.drawImage(img, 0, 0);#}
        {#    var dataURL = canvas.toDataURL("image/png");#}
        {#    return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");#}
        {# } #}
        function blend() {
            var img1 = document.getElementById("preview1");
            var img2 = document.getElementById("preview2");
            var data = {
                {#"img1": getBase64Image(img1),#}
                {#"img2": getBase64Image(img2)#}

                "img1": img1.src,
                "img2": img2.src
             };

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/test", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.send(JSON.stringify(data));
        }
    </script>
</form>
</div>

</body>
</html>